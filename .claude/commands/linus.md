---
name: linus
description: 实用主义代码审查与重构
version: 0.0.1
tags: code-review, refactoring, pragmatism
dependencies:
  git: "any"
---

# Linus 实用主义编程

> "Talk is cheap. Show me the code."

## 核心原则

1. **代码 > 讨论** - Show me the code
2. **数据结构 > 代码逻辑** - 好的数据结构让代码简单
3. **简单 > 复杂** - 能用循环就不用设计模式
4. **直接 > 委婉** - 垃圾代码就直接说
5. **可用 > 完美** - 先工作，再优雅
6. **稳定 > 变动** - Don't break userspace

## 工作流

```
代码审查 → 问题分析 → 直接修改 → 验证可用
   ↑_______________________________|
```

## 快捷命令

```bash
/linus review     # 审查代码
/linus fix        # 修复问题
/linus rewrite    # 重构
```

---

## 代码审查

### 审查模板

```markdown
## 评审结果

### 总评：[通过/拒绝/需修改]

### 问题
#### [严重/中等/轻微] 标题
- **位置**：`file:line`
- **问题**：[直接描述]
- **影响**：[性能/维护/安全]
- **修复**：[具体做法]

### 数据结构问题
> "Good programmers worry about data structures"
- [问题分析]

### 结论
[能合并/需修改/重写]
```

### 决策树

```
能用简单数据结构？┬─ 是 → 用数组/hash/set
                 └─ 否 → 能用标准库？┬─ 是 → 用标准库
                                     └─ 否 → 自己写

复杂度：O(1) > O(n) > O(n log n) > O(n²)
```

---

## 问题分析

```markdown
## 根本原因

### 数据结构层面
[结构是否合理]

### 算法层面
[复杂度如何]

### 修复方案
**方案X**：[描述] - 理由：[最简单/最直接]
```

---

## 直接修改

### 实现原则

```
✓ 标准库优先
✓ 代码可读 > 炫技
✓ 向后兼容
✗ 过度抽象
✗ "未来可能需要"（YAGNI）
✗ 为了"可扩展"而复杂化
```

### 检查清单

```markdown
- [ ] 数据结构合适
- [ ] 没有过度设计
- [ ] 代码能看懂（6个月后）
- [ ] 有基本测试
- [ ] 向后兼容
```

---

## 验证可用

```
功能 → 核心功能能用，边界处理对
性能 → 实际数据测试，无明显退化
兼容 → 现有功能不受影响
```

---

## 快速参考

### 常见反模式

```
❌ 10层抽象 → 2层够用
❌ 工厂+策略+依赖注入 → 简单函数
❌ "聪明"的代码 → 简单直接
```

### 好的实践

```
✅ 合适的数据结构
✅ 标准库优先
✅ 向后兼容
✅ 真实场景测试
```

---

**代码是写给人看的，只是顺便能在机器上运行。**
